<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <title>M√©dia Escolar</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <style>
    /* Estilos espec√≠ficos para a p√°gina de m√©dia escolar */
    .materia-bloco {
      border: 1px solid #ddd;
      padding: 12px;
      margin-bottom: 12px;
      border-radius: 8px;
      background: #f9fafb;
    }
    .avaliacoes div {
      display: flex;
      gap: 8px;
      margin-top: 6px;
    }
    .botoes-top {
      margin: 12px 0;
      display: flex;
      gap: 10px;
      justify-content: center;
      /* Aplica as regras para evitar o esticamento dos bot√µes */
    }
    /* Regras adicionadas para os bot√µes */
    .botoes-top button {
      flex-shrink: 0; /* Impede que o bot√£o encolha */
      width: auto; /* Garante que a largura seja autom√°tica */
    }
  </style>
  <script>
    let materiaCount = 0;

    function addMateria() {
      const container = document.getElementById("materias");
      const div = document.createElement("div");
      div.classList.add("materia-bloco");
      div.innerHTML = `
        <input type="text" name="materia_${materiaCount}" placeholder="Nome da mat√©ria" required>
        <div class="avaliacoes" id="avaliacoes_${materiaCount}">
          <div>
            <input type="text" name="tipo_${materiaCount}[]" placeholder="Tipo (Prova, Trabalho...)" required>
            <input type="number" step="0.01" min="0" max="10" name="nota_${materiaCount}[]" placeholder="Nota (0-10)" required>
          </div>
        </div>
        <button type="button" onclick="addAvaliacao(${materiaCount})">+ Avalia√ß√£o</button>
      `;
      container.appendChild(div);
      materiaCount++;
    }

    function addAvaliacao(materiaId) {
      const avaliacoes = document.getElementById("avaliacoes_" + materiaId);
      const div = document.createElement("div");
      div.innerHTML = `
        <input type="text" name="tipo_${materiaId}[]" placeholder="Tipo (Prova, Trabalho...)" required>
        <input type="number" step="0.01" min="0" max="10" name="nota_${materiaId}[]" placeholder="Nota (0-10)" required>
      `;
      avaliacoes.appendChild(div);
    }
  </script>
</head>
<body>
  <div class="page">
    <h1>üìò Calcular M√©dia Escolar</h1>
    <form method="post">
      <div id="materias"></div>
      <div class="botoes-top">
        <button type="button" onclick="addMateria()">+ Mat√©ria</button>
        <button type="submit">Calcular</button>
      </div>
    </form>

    {% if resultado %}
      <div class="resultado">
        <h2>Resultados</h2>
        {% for materia, dados in resultado.materias.items() %}
          <h3>{{ materia }} ‚Üí M√©dia: {{ dados.media }}</h3>
          <ul>
            {% for tipo, nota in dados.avaliacoes.items() %}
              <li>{{ tipo }}: {{ nota }}</li>
            {% endfor %}
          </ul>
        {% endfor %}
        <h2>üìä M√©dia Geral: {{ resultado.geral }}</h2>
      </div>
    {% endif %}
  </div>
  <a href="{{ url_for('index') }}">‚¨Ö Voltar</a>
</body>
</html>